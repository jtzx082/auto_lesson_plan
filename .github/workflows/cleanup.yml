name: Cleanup All Workflow Runs

on:
  # 1. æ¯å¤©å‡Œæ™¨ 4:00 (åŒ—äº¬æ—¶é—´) è‡ªåŠ¨æ¸…ç†ä¸€æ¬¡
  schedule:
    - cron: '0 20 * * *'
  # 2. å…è®¸æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®ç«‹å³æ¸…ç†
  workflow_dispatch:

jobs:
  del_runs:
    runs-on: ubuntu-latest
    permissions:
      actions: write  # âš ï¸ å¿…é¡»æƒé™ï¼šæ²¡æœ‰è¿™ä¸ªæƒé™æ— æ³•åˆ é™¤
      contents: read

    steps:
      - name: Delete workflow runs
        uses: Mattraks/delete-workflow-runs@v2
        with:
          token: ${{ github.token }}
          repository: ${{ github.repository }}
          
          # ---------------------------------------------
          # ğŸ”¥ å¼ºåŠ›æ¸…ç†é…ç½®
          # ---------------------------------------------
          # è®¾ç½®ä¸º 0ï¼šä»£è¡¨ä¸ä¿ç•™ä»»ä½•â€œæ—§â€è®°å½•ï¼Œå“ªæ€•æ˜¯åˆšè·‘å®Œçš„ä¹Ÿåˆ 
          retain_days: 0
          
          # è®¾ç½®ä¸º 0ï¼šä»£è¡¨ä¸å¼ºåˆ¶ä¿ç•™æœ€åå‡ æ¬¡è®°å½•
          keep_minimum_runs: 0
          
          # è¿‡æ»¤æ¡ä»¶ (å¯é€‰)ï¼š
          # å¦‚æœåªæƒ³æ¸…ç† generate_lesson_plan çš„è®°å½•ï¼Œå–æ¶ˆä¸‹é¢æ³¨é‡Šå¹¶å¡«å…¥å¯¹åº” Workflow åç§°
          # delete_workflow_pattern: "Generate Lesson Plan"
